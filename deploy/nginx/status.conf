# status.agentwall.io - Public Status Page
# Redirects to FastAPI status endpoint

server {
    listen 80;
    server_name status.agentwall.io;
    
    # Redirect HTTP to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name status.agentwall.io;
    
    # SSL certificates (Let's Encrypt via Easypanel)
    ssl_certificate /etc/letsencrypt/live/status.agentwall.io/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/status.agentwall.io/privkey.pem;
    
    # SSL settings
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;
    ssl_prefer_server_ciphers off;
    
    # Root path -> redirect to FastAPI status
    location = / {
        return 301 https://api.agentwall.io/status;
    }
    
    # All other paths -> redirect to FastAPI status
    location / {
        return 301 https://api.agentwall.io/status$request_uri;
    }
    
    # JSON endpoint
    location = /json {
        return 301 https://api.agentwall.io/status/json;
    }
}
